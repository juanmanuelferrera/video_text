<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Text Extractor - Standalone</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }
        
        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .server-status {
            background: rgba(255,255,255,0.95);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .status-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #e74c3c;
            animation: pulse 2s infinite;
        }
        
        .status-dot.connected {
            background: #27ae60;
            animation: none;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .main-content {
            background: rgba(255,255,255,0.95);
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .server-instructions {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 4px;
        }
        
        .command {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Monaco', 'Consolas', monospace;
            margin: 10px 0;
            font-size: 0.9rem;
        }
        
        .input-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        #video-url {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e6ed;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.2s;
        }
        
        #video-url:focus {
            outline: none;
            border-color: #3498db;
        }
        
        .extract-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.2s;
        }
        
        .extract-btn:hover:not(:disabled) {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .extract-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }
        
        .loading-section {
            text-align: center;
            padding: 40px;
            margin: 30px 0;
            display: none;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #e0e6ed;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .result-section {
            margin-top: 30px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 8px;
            display: none;
        }
        
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .result-actions {
            display: flex;
            gap: 10px;
        }
        
        .copy-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.2s;
        }
        
        .copy-btn:hover {
            background: #229954;
        }
        
        .text-output {
            background: white;
            padding: 25px;
            border-radius: 6px;
            font-size: 1rem;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
            min-height: 200px;
            max-height: 600px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
        }
        
        .demo-mode {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature {
            background: rgba(255,255,255,0.8);
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .feature-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .main-content { padding: 20px; }
            .input-group { flex-direction: column; }
            .server-status { flex-direction: column; gap: 15px; }
            .result-header { flex-direction: column; gap: 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé¨ Video Text Extractor</h1>
            <p>AI-powered video transcription with intelligent summaries</p>
        </div>
        
        <div class="server-status">
            <div class="status-info">
                <span class="status-dot" id="status-dot"></span>
                <span><strong>Server Status:</strong> <span id="status-text">Checking...</span></span>
            </div>
            <button onclick="checkServerStatus()" style="background: #3498db; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Check Server</button>
        </div>
        
        <div class="main-content">
            <div class="server-instructions">
                <h3>üöÄ Quick Start</h3>
                <p><strong>To enable video transcription, start the Python server:</strong></p>
                <div class="command">python3 start.py</div>
                <p>This will start the server on <code>localhost:8000</code> and enable real AI transcription.</p>
            </div>
            
            <div class="demo-mode" id="demo-mode" style="display: none;">
                <strong>üìã Demo Mode Active:</strong> Server not connected. Showing simulated results for demonstration.
            </div>
            
            <div class="input-group">
                <input type="url" id="video-url" placeholder="Paste your video URL here (YouTube, Vimeo, etc.)" required>
                <button id="extract-btn" class="extract-btn">Extract Text</button>
            </div>
            
            <div class="loading-section" id="loading-section">
                <div class="spinner"></div>
                <div id="loading-text">Processing video with AI...</div>
            </div>
            
            <div class="result-section" id="result-section">
                <div class="result-header">
                    <h3 id="result-title">üìÑ Extracted Text</h3>
                    <div class="result-actions">
                        <button id="copy-btn" class="copy-btn">üìã Copy Text</button>
                    </div>
                </div>
                <div class="text-output" id="text-output"></div>
            </div>
            
            <div class="result-section" id="summary-section">
                <div class="result-header">
                    <h3>üìù AI Summary</h3>
                    <div class="result-actions">
                        <button id="copy-summary-btn" class="copy-btn">üìã Copy Summary</button>
                    </div>
                </div>
                <div class="text-output" id="summary-output"></div>
            </div>
        </div>
        
        <div class="features">
            <div class="feature">
                <div class="feature-icon">ü§ñ</div>
                <h4>AI-Powered</h4>
                <p>Uses OpenAI Whisper for accurate transcription</p>
            </div>
            <div class="feature">
                <div class="feature-icon">üß†</div>
                <h4>Smart Summaries</h4>
                <p>Llama-4 generates insights and key ideas</p>
            </div>
            <div class="feature">
                <div class="feature-icon">üåç</div>
                <h4>Multi-Language</h4>
                <p>Supports 10+ languages with auto-detection</p>
            </div>
            <div class="feature">
                <div class="feature-icon">üì∫</div>
                <h4>Wide Support</h4>
                <p>YouTube, Vimeo, and many more platforms</p>
            </div>
        </div>
    </div>
    
    <script>
        let serverConnected = false;
        const backendUrl = 'http://localhost:8000';
        
        async function checkServerStatus() {
            const statusDot = document.getElementById('status-dot');
            const statusText = document.getElementById('status-text');
            const demoMode = document.getElementById('demo-mode');
            
            statusText.textContent = 'Checking...';
            
            try {
                const response = await fetch(`${backendUrl}/health`, { 
                    method: 'GET',
                    signal: AbortSignal.timeout(3000)
                });
                
                if (response.ok) {
                    serverConnected = true;
                    statusDot.classList.add('connected');
                    statusText.textContent = 'Connected';
                    statusText.style.color = '#27ae60';
                    demoMode.style.display = 'none';
                } else {
                    throw new Error('Server error');
                }
            } catch (error) {
                serverConnected = false;
                statusDot.classList.remove('connected');
                statusText.textContent = 'Disconnected';
                statusText.style.color = '#e74c3c';
                demoMode.style.display = 'block';
            }
        }
        
        async function extractText() {
            const url = document.getElementById('video-url').value.trim();
            if (!url) {
                alert('Please enter a video URL');
                return;
            }
            
            const loadingSection = document.getElementById('loading-section');
            const resultSection = document.getElementById('result-section');
            const summarySection = document.getElementById('summary-section');
            const extractBtn = document.getElementById('extract-btn');
            
            loadingSection.style.display = 'block';
            resultSection.style.display = 'none';
            summarySection.style.display = 'none';
            extractBtn.disabled = true;
            
            try {
                if (serverConnected) {
                    // Try real backend
                    const response = await fetch(`${backendUrl}/extract-text`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ video_url: url }),
                        signal: AbortSignal.timeout(300000) // 5 minutes
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        displayResult(data, false);
                    } else {
                        throw new Error('Server error');
                    }
                } else {
                    // Demo mode
                    await new Promise(resolve => setTimeout(resolve, 3000));
                    displayDemoResult(url);
                }
            } catch (error) {
                console.error('Error:', error);
                if (!serverConnected) {
                    displayDemoResult(url);
                } else {
                    alert('Failed to extract text. Please check the video URL and try again.');
                }
            } finally {
                loadingSection.style.display = 'none';
                extractBtn.disabled = false;
            }
        }
        
        function displayResult(data, isDemo = false) {
            const textOutput = document.getElementById('text-output');
            const summaryOutput = document.getElementById('summary-output');
            const resultSection = document.getElementById('result-section');
            const summarySection = document.getElementById('summary-section');
            const resultTitle = document.getElementById('result-title');
            
            textOutput.textContent = data.text || 'No text could be extracted from this video.';
            resultTitle.textContent = isDemo ? 'üìÑ Demo Transcription' : 'üìÑ Extracted Text';
            resultSection.style.display = 'block';
            
            if (data.summary) {
                summaryOutput.textContent = data.summary;
                summarySection.style.display = 'block';
            } else {
                summarySection.style.display = 'none';
            }
            
            resultSection.scrollIntoView({ behavior: 'smooth' });
        }
        
        function displayDemoResult(url) {
            const demoData = {
                text: `# Demo Video Transcription

**Source:** ${url}
**Language:** English (Demo)
**Status:** Demonstration Mode

---

Welcome to the Video Text Extractor demonstration! This is a simulated transcription to show you how the system works when connected to the backend server.

In real mode, this application uses OpenAI Whisper for accurate speech recognition and can process videos from YouTube, Vimeo, and many other platforms. The transcription includes automatic language detection, smart formatting with proper paragraphs, and source attribution.

The system supports multiple languages including English, Spanish, French, German, Italian, Portuguese, Russian, Japanese, Korean, and Chinese. Processing time varies based on video length, typically taking 1-3 minutes for a 10-minute video.

Key features include:
‚Ä¢ AI-powered transcription with OpenAI Whisper
‚Ä¢ Automatic language detection  
‚Ä¢ Smart text formatting and paragraphs
‚Ä¢ VTT-style timing information for subtitles
‚Ä¢ AI-generated summaries with insights
‚Ä¢ Copy and save functionality
‚Ä¢ Responsive web interface

To enable real video processing, please start the Python server by running 'python3 start.py' in your terminal, then refresh this page and check the server status indicator.`,
                
                summary: `*SUMMARY
Demo showcasing Video Text Extractor's AI transcription capabilities with Whisper and intelligent summarization features.

*INSIGHTS  
‚Ä¢ AI-powered transcription democratizes access to video content, making information more accessible globally
‚Ä¢ Automatic language detection breaks down barriers between different linguistic communities and cultures
‚Ä¢ Local processing ensures privacy while providing enterprise-grade transcription capabilities without cloud dependencies
‚Ä¢ Integration of timing information enables subtitle creation, enhancing accessibility for hearing-impaired users
‚Ä¢ Smart formatting transforms raw speech into readable text, preserving meaning while improving comprehension

*IDEAS
‚Ä¢ Multi-language support enables global content creators to reach broader audiences effectively
‚Ä¢ VTT-style timing allows seamless integration with video players and accessibility tools
‚Ä¢ Local processing addresses privacy concerns while maintaining high-quality transcription accuracy
‚Ä¢ Responsive design ensures accessibility across devices, from mobile phones to desktop computers
‚Ä¢ AI summarization extracts key insights, saving time for content consumers and researchers
‚Ä¢ Copy functionality enables easy integration with other tools and workflows
‚Ä¢ Demo mode allows users to understand capabilities before committing to full setup

üé¨ Revolutionary AI Video Transcription is Here! üöÄ

As someone passionate about accessible technology, I'm excited to share this incredible Video Text Extractor tool! 

This isn't just another transcription service - it's a complete AI-powered solution that combines OpenAI Whisper's speech recognition with intelligent summarization. What makes it special? Everything runs locally on your machine, ensuring complete privacy while delivering professional-grade results.

The system supports 10+ languages with automatic detection, creates subtitle-ready timing information, and even generates insightful summaries. Whether you're a content creator, researcher, student, or just someone who wants to make videos more accessible, this tool is a game-changer.

The best part? It's completely free and open-source! No cloud dependencies, no subscription fees, no data collection. Just powerful AI working for you, on your terms. üôè‚ú®`
            };
            
            displayResult(demoData, true);
        }
        
        async function copyText(elementId) {
            const element = document.getElementById(elementId);
            const button = elementId === 'text-output' ? 
                document.getElementById('copy-btn') : 
                document.getElementById('copy-summary-btn');
            
            try {
                await navigator.clipboard.writeText(element.textContent);
                const originalText = button.textContent;
                button.textContent = '‚úÖ Copied!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            } catch (error) {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = element.textContent;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                button.textContent = '‚úÖ Copied!';
                setTimeout(() => {
                    button.textContent = button.getAttribute('data-original') || 'üìã Copy';
                }, 2000);
            }
        }
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            checkServerStatus();
            
            document.getElementById('extract-btn').addEventListener('click', extractText);
            document.getElementById('copy-btn').addEventListener('click', () => copyText('text-output'));
            document.getElementById('copy-summary-btn').addEventListener('click', () => copyText('summary-output'));
            
            document.getElementById('video-url').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') extractText();
            });
            
            // Check server status every 30 seconds
            setInterval(checkServerStatus, 30000);
        });
    </script>
</body>
</html>